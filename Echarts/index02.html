<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test</title>
</head>
<body>
<div id="main" style="width: 850px; height: 500px"></div>
<div id="ss" ></div>
<script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
<!--<script>
    option = {
        title : {
            text: '人物关系：乔布斯',
            subtext: '数据来自人立方',
            x:'right',
            y:'bottom'
        },
        tooltip : {
            trigger: 'item',
            formatter: '{a} : {b}'
        },
        toolbox: {
            show : true,
            feature : {
                restore : {show: true},
                magicType: {show: true, type: ['force', 'chord']},
                saveAsImage : {show: true}
            }
        },
        legend: {
            x: 'left',
            data:['家人','朋友']
        },
        series : [
            {
                type:'force',
                name : "人物关系",
                ribbonType: false,
                categories : [
                    {
                        name: '人物'
                    },
                    {
                        name: '家人'
                    },
                    {
                        name:'朋友'
                    }
                ],
                itemStyle: {
                    normal: {
                        label: {
                            show: true,
                            textStyle: {
                                color: '#333'
                            }
                        },
                        nodeStyle : {
                            brushType : 'both',
                            borderColor : 'rgba(255,215,0,0.4)',
                            borderWidth : 1
                        },
                        linkStyle: {
                            type: 'line'
                        }
                    },
                    emphasis: {
                        label: {
                            show: false
                            // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE
                        },
                        nodeStyle : {
                            //r: 30
                        },
                        linkStyle : {}
                    }
                },
                useWorker: false,
                minRadius : 15,
                maxRadius : 25,
                gravity: 1.1,
                scaling: 1.1,
                roam: 'move',
                nodes:[
                    {category:0, name: '乔布斯', value : 10, label: '乔布斯\n（主要）'},
                    {category:1, name: '丽萨-乔布斯',value : 2},
                    {category:1, name: '保罗-乔布斯',value : 3},
                    {category:1, name: '克拉拉-乔布斯',value : 3},
                    {category:1, name: '劳伦-鲍威尔',value : 7},
                    {category:2, name: '史蒂夫-沃兹尼艾克',value : 5},
                    {category:2, name: '奥巴马',value : 8},
                    {category:2, name: '比尔-盖茨',value : 9},
                    {category:2, name: '乔纳森-艾夫',value : 4},
                    {category:2, name: '蒂姆-库克',value : 4},
                    {category:2, name: '龙-韦恩',value : 1},
                ],
                links : [
                    {source : '丽萨-乔布斯', target : '乔布斯', weight : 1, name: '女儿'},
                    {source : '保罗-乔布斯', target : '乔布斯', weight : 2, name: '父亲'},
                    {source : '克拉拉-乔布斯', target : '乔布斯', weight : 1, name: '母亲'},
                    {source : '劳伦-鲍威尔', target : '乔布斯', weight : 2},
                    {source : '史蒂夫-沃兹尼艾克', target : '乔布斯', weight : 3, name: '合伙人'},
                    {source : '奥巴马', target : '乔布斯', weight : 1},
                    {source : '比尔-盖茨', target : '乔布斯', weight : 6, name: '竞争对手'},
                    {source : '乔纳森-艾夫', target : '乔布斯', weight : 1, name: '爱将'},
                    {source : '蒂姆-库克', target : '乔布斯', weight : 1},
                    {source : '龙-韦恩', target : '乔布斯', weight : 1},
                    {source : '克拉拉-乔布斯', target : '保罗-乔布斯', weight : 1},
                    {source : '奥巴马', target : '保罗-乔布斯', weight : 1},
                    {source : '奥巴马', target : '克拉拉-乔布斯', weight : 1},
                    {source : '奥巴马', target : '劳伦-鲍威尔', weight : 1},
                    {source : '奥巴马', target : '史蒂夫-沃兹尼艾克', weight : 1},
                    {source : '比尔-盖茨', target : '奥巴马', weight : 6},
                    {source : '比尔-盖茨', target : '克拉拉-乔布斯', weight : 1},
                    {source : '蒂姆-库克', target : '奥巴马', weight : 1}
                ]
            }
        ]
    };
    var ecConfig = require('echarts/config');
    function focus(param) {
        var data = param.data;
        var links = option.series[0].links;
        var nodes = option.series[0].nodes;
        if (
            data.source !== undefined
            && data.target !== undefined
        ) { //点击的是边
            var sourceNode = nodes.filter(function (n) {return n.name == data.source})[0];
            var targetNode = nodes.filter(function (n) {return n.name == data.target})[0];
            console.log("选中了边 " + sourceNode.name + ' -> ' + targetNode.name + ' (' + data.weight + ')');
        } else { // 点击的是点
            console.log("选中了" + data.name + '(' + data.value + ')');
        }
    }
    myChart.on(ecConfig.EVENT.CLICK, focus)

    myChart.on(ecConfig.EVENT.FORCE_LAYOUT_END, function () {
        console.log(myChart.chart.force.getPosition());
    });



</script>-->
<script type="text/javascript">

    require.config({
        paths : {
            echarts : 'http://echarts.baidu.com/build/dist'
        }
    });
    require([ "echarts", "echarts/chart/force"], function(ec) {
        var myChart = ec.init(document.getElementById('main'), 'macarons');
        var option  = {
            title : {
                text: '人物关系：乔布斯',
                subtext: '数据来自人立方',
                x:'right',
                y:'bottom',
                textStyle:{
                    fontSize: 18,
                    fontWeight: 'bolder',
                    color: '#333'
                },
                subtextStyle:{
                    fontSize: 12,
                    fontWeight: 'bolder',
                    color: '#333'

                },//副标题字体样式

            },
            /*grid:{
                x:'10%',//控制统计图左上角的x坐标位置，可为数值单位是px，可用百分比
                y:'10%',//控制统计图左上角y坐标的位置，可为数值单位是px，可用百分比
                width:'80%',//控制统计图的宽度
                height:'90%',//控制统计图的高度
                borderWidth:1,//控制边框的线条粗细，为0则不显示
                borderColor:'#ccc'//修改边框的线条颜色，如果borderWidth为0则不起作用
            },*/
/*            xAxis : [
                {
                    type : 'category',//坐标轴类型，横轴默认为类目型'category'，纵轴默认为数值型'value'
                    data: ['A栋', 'B栋', 'C栋', 'D栋', 'E栋', 'F栋'],//x坐标轴上显示的数据
                    boundaryGap:true,//控制x轴的数值是否顶头，默认为true留空，false则顶头
                    splitLine: {//控制网格的线条样式
                        show:true,
                        lineStyle:{
                            color: '#48b',
                            width: 2,
                            type: 'solid'
                        }
                    },
                    axisLine:{//x轴的样式控制
                        show: true,　//显示与否
                        lineStyle:{//线条样式
                            color: '#48b',
                            width: 2,
                            type: 'solid'
                        }
                    },
                    axisTick:{//控制x轴上的间隔突出的小线条样式
                        show:'true',//显示与否
                        lineStyle:{//线条样式
                            color: '#48b',
                            width: 2,
                            type: 'solid'
                        }
                    },
                    axisLabel: {//控制x轴上的文字的样式
                        show: true,//显示与否
                        textStyle: { color: '#fff' },//控制x轴字体样式
                        formatter: '{value} °C',//轴上的数据带单位
                    }
                }
            ],*/
            tooltip : {
                /*trigger: 'item',
                formatter: '{a} : {b}'*/
                show: true,
                trigger: 'axis',
                axisPointer:{
                    type: 'shadow',
                    shadowStyle: {
                        color: 'rgba(88,101,137,0.3)',
                        width: 'auto',
                        type: 'default'
                    }
                }


            },
            toolbox: {
                show : true,
                feature : {
                    restore : {show: true},
                    magicType: {show: true, type: ['force', 'chord']},
                    saveAsImage : {show: true}
                }
            },
           /* yAxis : [
                {
                    type : 'value',
                    splitNumber: 5, // 数值轴用，分割段数，默认为5
                    boundaryGap:[0,0],
                    splitLine:{lineStyle:{color:'#505a73'}},
                    axisLine:{show: false},
                    axisLabel: { show: true, textStyle: { color: '#fff' },formatter: '{value} ' }
                },
                {
                    type : 'value',
                    splitNumber: 5, // 数值轴用，分割段数，默认为5
                    boundaryGap:[0,0],
                    axisLine:{show: false},
                    splitLine:{lineStyle:{color:'#505a73'}},
                    axisLabel: { show: true, textStyle: { color: '#fff' },formatter: '{value} '},
                    show:'true',
                    position: 'right',//控制新y轴的位置
                }
            ],*/
            legend: {
                x: 'left',
                data:['家人','朋友'],
                // x:'right',//控制图例的位置
                y:20,//控制图例的位置
                textStyle: {// 图例文字样式
                    color: '#000', // 图例文字颜色
                    fontSize:14
                }
            },
            series : [
                {
                    type:'force',
                    name : "人物关系",
                    ribbonType: false,
                    categories : [
                        {
                            name: '人物'
                        },
                        {
                            name: '家人'
                        },
                        {
                            name:'朋友'
                        }
                    ],
                    itemStyle: {
                        normal: {
                            label: {
                                show: true,
                                textStyle: {
                                    color: '#333'
                                }
                            },
                            nodeStyle : {
                                brushType : 'both',
                                borderColor : 'rgba(255,215,0,0.4)',
                                borderWidth : 1
                            },
                            linkStyle: {
                                type: 'line'
                            }
                        },
                        emphasis: {
                            label: {
                                show: false
                                // textStyle: null      // 默认使用全局文本样式，详见TEXTSTYLE
                            },
                            nodeStyle : {
                                //r: 30
                            },
                            linkStyle : {}
                        }
                    },
                    useWorker: false,
                    minRadius : 15,
                    maxRadius : 25,
                    gravity: 1.1,
                    scaling: 1.1,
                    roam: 'move',
                    nodes:[
                        {category:0, name: '乔布斯', value : 10, label: '乔布斯\n（主要）'},
                        {category:1, name: '丽萨-乔布斯',value : 2},
                        {category:1, name: '保罗-乔布斯',value : 3},
                        {category:1, name: '克拉拉-乔布斯',value : 3},
                        {category:1, name: '劳伦-鲍威尔',value : 7},
                        {category:2, name: '史蒂夫-沃兹尼艾克',value : 5},
                        {category:2, name: '奥巴马',value : 8},
                        {category:2, name: '比尔-盖茨',value : 9},
                        {category:2, name: '乔纳森-艾夫',value : 4},
                        {category:2, name: '蒂姆-库克',value : 4},
                        {category:2, name: '龙-韦恩',value : 1},
                    ],
                    links : [
                        {source : '丽萨-乔布斯', target : '乔布斯', weight : 1, name: '女儿'},
                        {source : '保罗-乔布斯', target : '乔布斯', weight : 2, name: '父亲'},
                        {source : '克拉拉-乔布斯', target : '乔布斯', weight : 1, name: '母亲'},
                        {source : '劳伦-鲍威尔', target : '乔布斯', weight : 2},
                        {source : '史蒂夫-沃兹尼艾克', target : '乔布斯', weight : 3, name: '合伙人'},
                        {source : '奥巴马', target : '乔布斯', weight : 1},
                        {source : '比尔-盖茨', target : '乔布斯', weight : 6, name: '竞争对手'},
                        {source : '乔纳森-艾夫', target : '乔布斯', weight : 1, name: '爱将'},
                        {source : '蒂姆-库克', target : '乔布斯', weight : 1},
                        {source : '龙-韦恩', target : '乔布斯', weight : 1},
                        {source : '克拉拉-乔布斯', target : '保罗-乔布斯', weight : 1},
                        {source : '奥巴马', target : '保罗-乔布斯', weight : 1},
                        {source : '奥巴马', target : '克拉拉-乔布斯', weight : 1},
                        {source : '奥巴马', target : '劳伦-鲍威尔', weight : 1},
                        {source : '奥巴马', target : '史蒂夫-沃兹尼艾克', weight : 1},
                        {source : '比尔-盖茨', target : '奥巴马', weight : 6},
                        {source : '比尔-盖茨', target : '克拉拉-乔布斯', weight : 1},
                        {source : '蒂姆-库克', target : '奥巴马', weight : 1}
                    ]
                }
            ]
        };
        myChart.setOption(option);
        // var ecConfig = require('echarts/config');
       /* function openOrFold(param) {
            var option = myChart.getOption();
            var nodesOption = option.series[0].nodes;
            var linksOption = option.series[0].links;
            var data = param.data;
            var linksNodes = [];

            var categoryLength = option.series[0].categories.length;

            if (data.category == (categoryLength - 1)) {
                alert(data.label);
            }

            if (data != null && data != undefined) {
                if (data.flag) {
                    for ( var m in linksOption) {
                        if (linksOption[m].target == data.id) {
                            linksNodes.push(linksOption[m].source);
                        }
                    }
                    if (linksNodes != null && linksNodes != undefined) {
                        for ( var p in linksNodes) {
                            nodesOption[linksNodes[p]].ignore = false;
                            nodesOption[linksNodes[p]].flag = true;
                        }
                    }
                    nodesOption[data.id].flag = false;
                    myChart.setOption(option);
                } else {

                    for ( var m in linksOption) {

                        if (linksOption[m].target == data.id) {
                            linksNodes.push(linksOption[m].source);
                        }
                        if (linksNodes != null && linksNodes != undefined) {
                            for ( var n in linksNodes) {
                                if (linksOption[m].target == linksNodes[n]) {
                                    linksNodes.push(linksOption[m].source);
                                }
                            }
                        }
                    }
                    if (linksNodes != null && linksNodes != undefined) {
                        for ( var p in linksNodes) {
                            nodesOption[linksNodes[p]].ignore = true;
                            nodesOption[linksNodes[p]].flag = true;
                        }
                    }
                    nodesOption[data.id].flag = true;
                    myChart.setOption(option);
                }
            }
        }*/
        /*function focus(param) {
            console.log(param);
            var data = param.data;
            var links = option.series[0].links;
            var nodes = option.series[0].nodes;
            if (data.source !== undefined && data.target !== undefined) { //点击的是边
                var sourceNode = nodes.filter(function (n) {return n.name == data.source})[0];
                var targetNode = nodes.filter(function (n) {return n.name == data.target})[0];
                console.log("选中了边 " + sourceNode.name + ' -> ' + targetNode.name + ' (' + data.weight + ')');
            } else { // 点击的是点
                console.log("选中了" + data.name + '(' + data.value + ')');
            }
        }*/



        // myChart.on(ecConfig.EVENT.CLICK, focus);
        // myChart.on(ecConfig.EVENT.FORCE_LAYOUT_END, function () {
            // console.log(myChart.chart.force.getPosition());
        // });
    });
</script>

</body>
</html>
